<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake Game with Touch Controls</title>
<style>
  body {
    margin: 0;
    background-color: #333;
    touch-action: none; /* Prevent default touch actions */
    overflow: hidden;
  }
  canvas {
    display: block;
    margin: 0 auto;
    background-color: #000;
    touch-action: none; /* Prevent default touch actions */
  }
  #controls {
    display: flex;
    justify-content: center;
    margin-top: 10px;
  }
  .button {
    width: 60px;
    height: 60px;
    margin: 5px;
    background-color: #666;
    color: white;
    font-size: 24px;
    text-align: center;
    line-height: 60px;
    border-radius: 10px;
    user-select: none;
    touch-action: none;
  }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// Adjust canvas size to fit the screen
canvas.width = window.innerWidth;
canvas.height = window.innerHeight - 100; // Leave space for controls

let speed = 10;
let tileCountX = 20;
let tileCountY = 20;
let tileSizeX = canvas.width / tileCountX;
let tileSizeY = canvas.height / tileCountY;

let headX = 10;
let headY = 10;

const snakeParts = [];
let tailLength = 2;

let donutX = Math.floor(Math.random() * tileCountX);
let donutY = Math.floor(Math.random() * tileCountY);

let xVelocity = 0;
let yVelocity = 0;

let score = 0;

let showVictoryMessage = false;

// Touch Controls
let touchStartX = 0;
let touchStartY = 0;

const colors = ['#FF0000', '#FF7F00', '#FFFF00', '#008000', '#0000FF', '#8B00FF'];

// Create a pattern that looks like a wire cable
const patternCanvas = document.createElement('canvas');
patternCanvas.width = 20;
patternCanvas.height = 20;
const pctx = patternCanvas.getContext('2d');

// Draw the wire cable pattern
pctx.fillStyle = '#888';
pctx.fillRect(0, 0, 20, 20);

pctx.strokeStyle = '#bbb';
pctx.lineWidth = 2;

pctx.beginPath();
pctx.moveTo(0, 20);
pctx.lineTo(20, 0);
pctx.stroke();

pctx.beginPath();
pctx.moveTo(5, 20);
pctx.lineTo(20, 5);
pctx.stroke();

pctx.beginPath();
pctx.moveTo(0, 15);
pctx.lineTo(15, 0);
pctx.stroke();

const snakePattern = ctx.createPattern(patternCanvas, 'repeat');

// Load donut image
const donutImage = new Image();
donutImage.src = data:image/jpeg;base64,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; // Replace with a valid image URL

function drawGame() {
  changeSnakePosition();
  clearScreen();
  checkDonutCollision();
  drawDonut();
  drawSnake();
  drawScore();

  if (showVictoryMessage) {
    drawVictoryMessage();
  }

  setTimeout(drawGame, 1000 / speed);
}

function clearScreen() {
  ctx.fillStyle = 'black';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function drawSnake() {
  ctx.fillStyle = snakePattern;
  for (let part of snakeParts) {
    ctx.fillRect(part.x * tileSizeX, part.y * tileSizeY, tileSizeX, tileSizeY);
  }

  // Add the head to the snake parts array
  snakeParts.push({ x: headX, y: headY });
  while (snakeParts.length > tailLength) {
    // Remove the oldest part of the snake
    snakeParts.shift();
  }

  ctx.fillRect(headX * tileSizeX, headY * tileSizeY, tileSizeX, tileSizeY);
}

function changeSnakePosition() {
  headX += xVelocity;
  headY += yVelocity;

  // Wrap around the canvas edges
  if (headX < 0) {
    headX = tileCountX - 1;
  } else if (headX >= tileCountX) {
    headX = 0;
  }

  if (headY < 0) {
    headY = tileCountY - 1;
  } else if (headY >= tileCountY) {
    headY = 0;
  }
}

function drawDonut() {
  ctx.drawImage(donutImage, donutX * tileSizeX, donutY * tileSizeY, tileSizeX, tileSizeY);
}

function checkDonutCollision() {
  if (donutX === headX && donutY === headY) {
    donutX = Math.floor(Math.random() * tileCountX);
    donutY = Math.floor(Math.random() * tileCountY);
    tailLength++;
    score += 10;

    // Check if score reaches 50 points
    if (score >= 50 && !showVictoryMessage) {
      showVictoryMessage = true;
    }
  }
}

function drawScore() {
  ctx.fillStyle = 'white';
  ctx.font = '18px Verdana';
  ctx.fillText('Score: ' + score, 10, 30);
}

function drawVictoryMessage() {
  // Draw the rainbow flag over the game screen
  const stripeHeight = canvas.height / colors.length;

  for (let i = 0; i < colors.length; i++) {
    ctx.fillStyle = colors[i];
    ctx.fillRect(0, i * stripeHeight, canvas.width, stripeHeight);
  }

  // Draw the winning title
  ctx.fillStyle = 'black';
  ctx.font = '120px Verdana';
  ctx.textAlign = 'center';
  ctx.fillText('Congratulations you are gay', canvas.width / 2, canvas.height / 2);
}

// Touch controls
canvas.addEventListener('touchstart', handleTouchStart, false);
canvas.addEventListener('touchmove', handleTouchMove, false);

function handleTouchStart(evt) {
  const firstTouch = evt.touches[0];
  touchStartX = firstTouch.clientX;
  touchStartY = firstTouch.clientY;
}

function handleTouchMove(evt) {
  if (!touchStartX || !touchStartY) {
    return;
  }

  let touchEndX = evt.touches[0].clientX;
  let touchEndY = evt.touches[0].clientY;

  const diffX = touchStartX - touchEndX;
  const diffY = touchStartY - touchEndY;

  if (Math.abs(diffX) > Math.abs(diffY)) {
    // Horizontal swipe
    if (diffX > 0 && xVelocity !== 1) {
      // Left swipe
      xVelocity = -1;
      yVelocity = 0;
    } else if (diffX < 0 && xVelocity !== -1) {
      // Right swipe
      xVelocity = 1;
      yVelocity = 0;
    }
  } else {
    // Vertical swipe
    if (diffY > 0 && yVelocity !== 1) {
      // Up swipe
      xVelocity = 0;
      yVelocity = -1;
    } else if (diffY < 0 && yVelocity !== -1) {
      // Down swipe
      xVelocity = 0;
      yVelocity = 1;
    }
  }

  // Reset touch positions
  touchStartX = null;
  touchStartY = null;
}

document.addEventListener('keydown', keyDown);

function keyDown(event) {
  // Use event.key instead of event.keyCode
  if (event.key === 'ArrowUp' && yVelocity !== 1) { // Up
    yVelocity = -1;
    xVelocity = 0;
  }
  if (event.key === 'ArrowDown' && yVelocity !== -1) { // Down
    yVelocity = 1;
    xVelocity = 0;
  }
  if (event.key === 'ArrowLeft' && xVelocity !== 1) { // Left
    yVelocity = 0;
    xVelocity = -1;
  }
  if (event.key === 'ArrowRight' && xVelocity !== -1) { // Right
    yVelocity = 0;
    xVelocity = 1;
  }
}

drawGame();
</script>
</body>
</html>
